<script setup lang="ts">
import { ref, watch } from 'vue'
import { useRoute } from 'vue-router'
// firebase logout import
import router from './../router'
import { useUserStore } from '@/stores/userStore'
import { getAuth, signOut } from 'firebase/auth'

function logoutFromFirebase() {
  const auth = getAuth()
  signOut(auth)
    .then(() => {
      // Sign-out successful.
      router.push('/login')
      // delete user from current state
      const userStore = useUserStore()
      userStore.name = ''
      userStore.email = ''
      router.push('/login')
    })
    .catch((error) => {
      // An error happened.
      alert('Error al cerrar sesión')
    })
}

const route = useRoute() // Obtén la información de la ruta

let cfcolorSVG = ref('#ABABAB') // Color predeterminado
let qcolorSVG = ref('#ABABAB') // Color predeterminado
let fcolorSVG = ref('#ABABAB') // Color predeterminado
let icolorSVG = ref('#ABABAB') // Color predeterminado

watch(
  () => route.name,
  (to, from) => {
    console.log('Nueva página activa:', to)

    if (to === 'crearfc') {
      cfcolorSVG.value = '#003B8C'
    } else {
      cfcolorSVG.value = '#ABABAB'
    }
    if (to === 'quizzes') {
      qcolorSVG.value = '#003B8C'
    } else {
      qcolorSVG.value = '#ABABAB'
    }
    if (to === 'inicio') {
      icolorSVG.value = '#003B8C'
    } else {
      icolorSVG.value = '#ABABAB'
    }
    if (to === 'flashcards') {
      fcolorSVG.value = '#003B8C'
    } else {
      fcolorSVG.value = '#ABABAB'
    }
  }
)
</script>

<template>
  <navbar class="flex h-full w-[15rem] justify-between items-center flex-col shadow-xl">
    <logo class="w-[75%]"> <img src="../assets/logo.png" width="250" height="100" /> </logo>
    <div class="w-full mt-10">
      <inicio class="navbarcomponente">
        <router-link
          to="/inicio"
          class="navbarcomponente w-[90%] hover:bg-accent-100 bg-white py-8 rounded-xl"
        >
          <iconodeinicio class="navbarcomponenteicono">
            <svg
              width="40"
              height="40"
              viewBox="0 0 30 30"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                :class="
                  $route.name === 'inicio'
                    ? 'fill-primary-seleccionado'
                    : 'fill-primary-noseleccionado'
                "
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M1.29627 9.11688C0.533966 10.7078 0.802183 12.5698 1.33862 16.2924L1.73106 19.0268C2.41854 23.8095 2.76299 26.1995 4.4217 27.6281C6.0804 29.0567 8.51271 29.0567 13.3787 29.0567H16.5013C21.3673 29.0567 23.7996 29.0567 25.4584 27.6281C27.1171 26.1995 27.4615 23.8095 28.149 19.0268L28.5428 16.2924C29.0793 12.5698 29.3475 10.7078 28.5838 9.11688C27.8215 7.52593 26.1967 6.55752 22.9484 4.62354L20.9933 3.45892C18.0457 1.70139 16.5691 0.823334 14.94 0.823334C13.311 0.823334 11.8358 1.70139 8.8868 3.45892L6.93164 4.62354C3.68481 6.55752 2.05998 7.52593 1.29627 9.11688ZM9.64627 23.41C9.64627 23.1292 9.75782 22.8599 9.95638 22.6614C10.1549 22.4628 10.4242 22.3512 10.705 22.3512H19.175C19.4558 22.3512 19.7251 22.4628 19.9237 22.6614C20.1222 22.8599 20.2338 23.1292 20.2338 23.41C20.2338 23.6908 20.1222 23.9601 19.9237 24.1586C19.7251 24.3572 19.4558 24.4688 19.175 24.4688H10.705C10.4242 24.4688 10.1549 24.3572 9.95638 24.1586C9.75782 23.9601 9.64627 23.6908 9.64627 23.41Z"
                :fill="icolorSVG"
              />
            </svg>
          </div>
          <div
            class="flex navbarcomponentetexto text-lg"
            :class="
              $route.name === 'inicio' ? 'text-primary-seleccionado' : 'text-primary-noseleccionado'
            "
          >
            Inicio
          </div>
        </router-link>
      </inicio>
      <flashcards class="navbarcomponente">
        <router-link
          to="/flashcards"
          class="navbarcomponente w-[90%] hover:bg-accent-100 bg-white py-8 rounded-xl"
        >
          <iconodeflashcard class="navbarcomponenteicono">
            <svg
              width="40"
              height="40"
              viewBox="0 0 34 34"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                :class="
                  $route.name === 'flashcards'
                    ? 'fill-primary-seleccionado'
                    : 'fill-primary-noseleccionado'
                "
                d="M15.7954 3.17603C15.4284 3.17603 15.0614 3.26072 14.7085 3.38776L4.31936 7.69303C3.62877 7.97583 3.07875 8.5213 2.79023 9.20952C2.50171 9.89774 2.4983 10.6724 2.78076 11.3631L9.78212 28.2313C9.98892 28.7429 10.3411 29.1827 10.7952 29.4963C11.2493 29.8099 11.7853 29.9835 12.337 29.9958C12.7041 29.9958 13.0852 29.9534 13.4522 29.784L23.8554 25.4787C24.3575 25.2657 24.788 24.913 25.0957 24.4627C25.4035 24.0123 25.5756 23.4831 25.5916 22.9379C25.6058 22.585 25.5352 22.1757 25.4081 21.8087L18.3503 4.94048C18.1508 4.42388 17.8004 3.97929 17.3447 3.66459C16.889 3.34989 16.3492 3.17965 15.7954 3.17603ZM20.7076 3.17603L25.5775 14.9626V5.99915C25.5775 5.25041 25.2801 4.53234 24.7506 4.0029C24.2212 3.47346 23.5031 3.17603 22.7544 3.17603M28.4148 5.34983V18.0963L31.8449 9.82449C31.9855 9.48257 32.0572 9.11624 32.056 8.74652C32.0547 8.37681 31.9805 8.01098 31.8376 7.67001C31.6946 7.32904 31.4858 7.01965 31.223 6.75957C30.9602 6.49949 30.6487 6.29385 30.3063 6.15443M15.7954 5.95681L22.825 22.9238L12.3935 27.2432L5.36392 10.2903"
                :fill="fcolorSVG"
              />
            </svg>
          </div>
          <div
            class="navbarcomponentetexto text-lg"
            :class="
              $route.name === 'flashcards'
                ? 'text-primary-seleccionado'
                : 'text-primary-noseleccionado'
            "
          >
            Flashcard
          </div>
        </router-link>
      </div>

      <quizzes class="navbarcomponente">
        <router-link
          to="/quizzes"
          class="navbarcomponente w-[90%] hover:bg-accent-100 bg-white py-8 rounded-xl"
        >
          <iconodequiz class="navbarcomponenteicono">
            <svg
              width="34"
              height="34"
              viewBox="0 0 34 34"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                :class="
                  $route.name === 'quizzes'
                    ? 'stroke-primary-seleccionado'
                    : 'stroke-primary-noseleccionado'
                "
                d="M2.82312 16.9388C2.82312 10.2847 2.82312 6.95761 4.88965 4.88967C6.959 2.82314 10.2847 2.82314 16.9388 2.82314C23.5929 2.82314 26.9199 2.82314 28.9865 4.88967C31.0544 6.95902 31.0544 10.2847 31.0544 16.9388C31.0544 23.5929 31.0544 26.92 28.9865 28.9865C26.9214 31.0544 23.5929 31.0544 16.9388 31.0544C10.2847 31.0544 6.95759 31.0544 4.88965 28.9865C2.82312 26.9214 2.82312 23.5929 2.82312 16.9388Z"
                stroke-width="3"
              />
              <path
                :class="
                  $route.name === 'quizzes'
                    ? 'stroke-primary-seleccionado'
                    : 'stroke-primary-noseleccionado'
                "
                d="M14.2921 12.5276C14.2922 12.0641 14.414 11.6088 14.6453 11.2071C14.8766 10.8055 15.2093 10.4716 15.6102 10.2389C16.0111 10.0063 16.466 9.88295 16.9295 9.88133C17.393 9.8797 17.8488 9.99983 18.2513 10.2297C18.6538 10.4595 18.9889 10.7911 19.223 11.1911C19.4571 11.5911 19.5821 12.0456 19.5854 12.5091C19.5887 12.9726 19.4703 13.4288 19.2419 13.8321C19.0135 14.2355 18.6832 14.5717 18.284 14.8073C17.6135 15.204 16.9388 15.8067 16.9388 16.5859V18.3503"
                stroke-width="3"
                stroke-linecap="round"
              />
              <path
                :class="
                  $route.name === 'quizzes'
                    ? 'fill-primary-seleccionado'
                    : 'fill-primary-noseleccionado'
                "
                d="M16.9388 23.9966C17.7184 23.9966 18.3504 23.3646 18.3504 22.585C18.3504 21.8055 17.7184 21.1735 16.9388 21.1735C16.1592 21.1735 15.5272 21.8055 15.5272 22.585C15.5272 23.3646 16.1592 23.9966 16.9388 23.9966Z"
              />
            </svg>
          </div>
          <div
            class="navbarcomponentetexto font-sans-Poppins text-lg"
            :class="
              $route.name === 'quizzes'
                ? 'text-primary-seleccionado'
                : 'text-primary-noseleccionado'
            "
          >
            Quizzes
          </div>
        </router-link>
      </div>

      <creaciondeflashcard class="navbarcomponente">
        <router-link
          to="/creacionfc"
          class="navbarcomponente w-[90%] hover:bg-accent-100 bg-white py-8 rounded-xl"
        >
          <iconodeflashcard class="navbarcomponenteicono">
            <svg width="41" height="39" viewBox="0 0 29 27" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_164_347)">
                <path
                  :class="
                    $route.name === 'creacionfc'
                      ? 'fill-primary-seleccionado'
                      : 'fill-primary-noseleccionado'
                  "
                  d="M6.81648 10.3088C7.53632 10.6193 7.99289 11.5857 8.04981 12.9345C8.08894 13.828 7.97865 14.5029 7.69048 15.0926C7.02164 16.4481 5.81915 16.4963 5.12541 15.1958C4.82894 14.6487 4.70086 14.0466 4.70086 13.2024C4.70798 12.3021 4.80996 11.7741 5.11237 11.19C5.54284 10.3581 6.17373 10.0296 6.81648 10.3088ZM18.4002 10.394C19.1011 10.8312 19.5837 12.2181 19.4865 13.5062C19.3774 15.0433 18.6576 16.1498 17.7836 16.1498C17.3009 16.1498 16.8064 15.7485 16.485 15.0926C15.9514 13.9984 15.9834 12.1631 16.5621 11.0936C16.9926 10.2908 17.7765 9.99373 18.4002 10.394ZM14.6908 0.0325225C14.9552 0.0683986 14.9932 0.0997901 15.1414 0.359892C15.3596 0.73659 15.4948 0.871125 15.9004 1.12002C16.2727 1.34424 16.2727 1.35657 16.1447 1.93395C16.0344 2.42052 16.0984 2.90036 16.3368 3.332C16.6842 3.98225 17.6543 4.66278 18.5425 4.87579C18.8758 4.961 19.011 4.9666 19.4165 4.90045C19.6798 4.86346 19.9371 4.84552 19.9881 4.86346C20.0462 4.88812 20.1814 5.08768 20.2965 5.31303C20.5538 5.8366 21.1977 6.46218 21.7112 6.68753C22.5473 7.0575 23.4545 7.03956 24.3273 6.63147C24.5716 6.51712 24.8159 6.44425 24.874 6.46218C24.925 6.48012 25.0732 6.61914 25.2013 6.76601C25.3305 6.91848 25.5879 7.11244 25.7681 7.19764C26.0634 7.34339 26.1725 7.36133 26.6611 7.3546C27.0465 7.349 27.2398 7.36805 27.2849 7.42187C27.4711 7.63488 27.9846 9.88947 28.204 11.44C28.3973 12.8313 28.4162 15.9436 28.236 17.3035C27.9988 19.1466 27.6454 20.7263 27.1568 22.1479C26.8094 23.1569 26.501 23.8195 25.8642 24.9014C24.9001 26.5427 24.5265 26.9071 23.8197 26.9071C23.6227 26.9076 23.4263 26.885 23.2351 26.8398C22.8165 26.7064 22.1737 26.2389 21.1835 25.3509C20.0142 24.306 19.5185 23.9417 18.9019 23.6558C18.15 23.3026 17.41 23.2724 16.7673 23.5706C16.6131 23.6435 16.1767 23.9719 15.8103 24.306C15.0394 24.9989 14.743 25.1502 14.067 25.1929C13.2321 25.2422 12.7625 25.0415 11.4509 24.0807C10.8924 23.6737 10.4809 23.491 10.0243 23.4551C9.47169 23.4125 9.06611 23.5459 8.17314 24.0571C7.29203 24.5617 6.82241 24.7186 6.21168 24.7186C4.93923 24.7186 3.83279 23.9787 2.69553 22.3676C1.429 20.5615 0.502823 18.0389 0.201608 15.5422C0.0853906 14.6004 0.0664164 12.6979 0.162473 11.7674C0.670033 6.98463 3.12008 3.32527 7.07382 1.46084C8.30715 0.877852 9.6638 0.469762 11.2126 0.220872C12.37 0.0381281 14.0741 -0.0526831 14.6908 0.0325225ZM12.0356 1.69179C9.06018 1.97095 6.16662 3.49008 4.42455 5.67852C2.61133 7.95777 1.60214 11.7315 1.96977 14.8605C2.20694 16.9346 3.11296 19.2856 4.32849 21.0122C4.94516 21.8866 5.18233 22.1299 5.614 22.3306C6.26979 22.6344 6.94456 22.5257 7.78061 21.9842C8.52653 21.4976 9.29855 21.2857 10.1263 21.3283C10.9683 21.3765 11.2908 21.5346 12.5633 22.5616C13.3151 23.1692 13.965 23.2365 14.6908 22.7802C14.8521 22.677 15.2126 22.4158 15.4948 22.1972C16.4008 21.4864 17.0958 21.2364 18.1951 21.2308C19.5707 21.2241 20.4637 21.7106 21.7302 23.1703C22.7595 24.3475 23.158 24.5919 23.7225 24.3912C24.6487 24.0571 25.5808 22.0571 26.1915 19.104C27.0015 15.2025 26.8473 11.792 25.7741 9.72018C25.4266 9.03853 25.0092 8.60129 24.6166 8.49254C24.3724 8.42528 24.2965 8.43088 23.7818 8.58896C23.2861 8.74144 23.1129 8.7661 22.4702 8.7661C21.8654 8.7661 21.6531 8.73471 21.2938 8.62035C20.606 8.40061 20.2976 8.13379 19.5316 7.10011C19.1782 6.62026 18.8698 6.46218 18.0338 6.30411C16.4921 6.02382 15.8612 5.76933 15.3146 5.20989C14.7999 4.68744 14.4726 3.98786 14.2354 2.90709C14.1702 2.59093 14.0551 2.24451 13.984 2.13464C13.7207 1.73439 13.0839 1.58753 12.0356 1.69179Z"
                />
              </g>
              <defs>
                <clipPath id="clip0_164_347">
                  <rect width="28.4613" height="26.907" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </div>
          <div
            class="navbarcomponentetexto font-sans-Poppins text-lg"
            :class="
              $route.name === 'creacionfc'
                ? 'text-primary-seleccionado'
                : 'text-primary-noseleccionado'
            "
          >
            Crear <br />
            Flashcards
          </div>
        </router-link>
      </creaciondeflashcard>
    </div>
    <!--      <ajustes class="navbarcomponente">-->
    <!--        <iconoajustes class="navbarcomponenteicono">-->
    <!--          <svg-->
    <!--            width="57"-->
    <!--            height="58"-->
    <!--            viewBox="0 0 57 58"-->
    <!--            fill="none"-->
    <!--            xmlns="http://www.w3.org/2000/svg"-->
    <!--          >-->
    <!--            <rect width="57" height="58" rx="16" fill="#F5F7FF" />-->
    <!--            <path-->
    <!--              d="M45.04 32.09C45.3503 32.3185 45.5817 32.6379 45.702 33.004C45.8223 33.3701 45.8255 33.7645 45.7113 34.1325C44.9189 36.6657 43.5711 38.9901 41.7663 40.9363C41.5057 41.2157 41.1649 41.4074 40.7908 41.4851C40.4168 41.5627 40.0278 41.5225 39.6775 41.37L37.2338 40.2975C36.9668 40.1787 36.6757 40.1239 36.3838 40.1375C36.0929 40.1544 35.8101 40.2401 35.5588 40.3875C35.307 40.5332 35.0934 40.7365 34.9355 40.9807C34.7775 41.225 34.6797 41.5032 34.65 41.7925L34.3563 44.455C34.314 44.834 34.1555 45.1907 33.9027 45.4762C33.6498 45.7618 33.3149 45.9622 32.9438 46.05C30.3488 46.6688 27.6438 46.6688 25.0488 46.05C24.6802 45.9608 24.3478 45.7609 24.0964 45.477C23.845 45.1932 23.6866 44.8391 23.6425 44.4625L23.3488 41.805C23.298 41.3521 23.0822 40.9338 22.7425 40.63C22.477 40.3958 22.1506 40.2416 21.8011 40.1852C21.4516 40.1288 21.0932 40.1725 20.7675 40.3113L18.3238 41.385C17.9745 41.5375 17.5866 41.5781 17.2133 41.5014C16.84 41.4246 16.4996 41.2342 16.2388 40.9563C14.4309 39.0081 13.0814 36.6805 12.2888 34.1438C12.1751 33.7762 12.1786 33.3825 12.2986 33.017C12.4187 32.6515 12.6494 32.3323 12.9588 32.1038L15.115 30.51C15.3506 30.3372 15.5422 30.1114 15.6743 29.8508C15.8064 29.5902 15.8752 29.3022 15.8752 29.01C15.8752 28.7178 15.8064 28.4298 15.6743 28.1692C15.5422 27.9086 15.3506 27.6828 15.115 27.51L12.9588 25.9188C12.651 25.6914 12.4213 25.3742 12.3013 25.0109C12.1813 24.6475 12.1769 24.2559 12.2888 23.89C13.0811 21.3552 14.4303 19.0297 16.2375 17.0838C16.4125 16.895 16.625 16.745 16.8625 16.645C17.0939 16.547 17.3425 16.4965 17.5938 16.4965C17.845 16.4965 18.0937 16.547 18.325 16.645L20.7588 17.7175C21.0265 17.8325 21.3175 17.8832 21.6083 17.8656C21.8992 17.8479 22.1819 17.7624 22.4338 17.6159C22.6857 17.4693 22.8997 17.2659 23.0588 17.0217C23.2179 16.7776 23.3177 16.4996 23.35 16.21L23.645 13.5575C23.6879 13.1745 23.8492 12.8144 24.1064 12.5274C24.3637 12.2404 24.704 12.0407 25.08 11.9563C26.3719 11.6712 27.6897 11.5196 29.0125 11.5038C30.3275 11.5188 31.6375 11.67 32.9213 11.9563C33.2981 12.0401 33.6392 12.2401 33.8964 12.528C34.1536 12.816 34.314 13.1774 34.355 13.5613L34.65 16.2113C34.6813 16.5004 34.7802 16.7782 34.9387 17.022C35.0971 17.2659 35.3108 17.4691 35.5623 17.6151C35.8138 17.7611 36.0962 17.8459 36.3866 17.8626C36.6769 17.8793 36.9672 17.8275 37.2338 17.7113L39.6663 16.64C40.0171 16.4874 40.4065 16.447 40.7811 16.5244C41.1557 16.6019 41.4972 16.7933 41.7588 17.0725C43.5649 19.0165 44.9132 21.3399 45.705 23.8725C45.8195 24.2397 45.8163 24.6335 45.696 24.9988C45.5756 25.3642 45.3441 25.6827 45.0338 25.91L42.8838 27.5013C42.6472 27.6725 42.4546 27.8972 42.3215 28.1572C42.1885 28.4171 42.1189 28.7048 42.1184 28.9969C42.1179 29.2889 42.1866 29.5768 42.3187 29.8372C42.4509 30.0976 42.6428 30.323 42.8788 30.495L45.04 32.09ZM29 34C30.3261 34 31.5979 33.4732 32.5356 32.5355C33.4732 31.5979 34 30.3261 34 29C34 27.6739 33.4732 26.4022 32.5356 25.4645C31.5979 24.5268 30.3261 24 29 24C27.6739 24 26.4022 24.5268 25.4645 25.4645C24.5268 26.4022 24 27.6739 24 29C24 30.3261 24.5268 31.5979 25.4645 32.5355C26.4022 33.4732 27.6739 34 29 34Z"-->
    <!--              fill="#ABABAB"-->
    <!--            />-->
    <!--          </svg>-->
    <!--        </iconoajustes>-->
    <!--        <textoajustes class="navbarcomponentetexto font-sans-Poppins text-gray-600"-->
    <!--          >Ajustes-->
    <!--        </textoajustes>-->
    <!--      </ajustes>-->
    <div
      @click="logoutFromFirebase"
      class="bg-gray-100 mt-16 w-[90%] hover:bg-red-100 cursor-pointer hover:text-red-800 text-center py-2 mb-4 text-sm text-gray-500 rounded-xl"
    >
      Cerrar Sesion
    </div>
  </navbar>
</template>

<style scoped>
svg {
  @apply relative translate-x-[-50%];
}
</style>
